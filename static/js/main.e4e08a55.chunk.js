(this["webpackJsonpamber-recruitment"]=this["webpackJsonpamber-recruitment"]||[]).push([[0],{53:function(e,t,n){e.exports=n(95)},80:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(20),l=n.n(o),s=n(10),i=n(11),c=n(13),u=n(12),m=n(7),d=function(){return r.a.createElement("h1",{className:"text-center"},"Home section")},g=function(){return r.a.createElement(d,null)},b=n(4),h=(n(80),n(30)),p=n.n(h),f=p.a.initializeApp({apiKey:"AIzaSyBQC4y3n_ooduNrzEZepf5-mAG61GMhT6o",authDomain:"amber-recruitment.firebaseapp.com",databaseURL:"https://amber-recruitment.firebaseio.com",projectId:"amber-recruitment",storageBucket:"amber-recruitment.appspot.com",messagingSenderId:"1095496441215",appId:"1:1095496441215:web:87b231efee596734474e4a"});var E=function(e,t){document.getElementById("success-login").innerHTML='<div class="alert alert-success alert-dismissible" style="position: absolute; top: 100px; right: 20px;">\n                  <a href="#" class="close" data-dismiss="alert"  aria-label="close">&times;</a>\n                 '.concat(e," ").concat(t,"</div>");var n=document.querySelector(".alert");setTimeout((function(){n.style.display="none"}),2e3),n.addEventListener("click",(function(){n.style.display="none"}))},y=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={jobTitle:"",jobSalary:"",jobLocation:"",jobDescription:""},e.handleJobTitle=function(t){e.setState({jobTitle:t.target.value})},e.handleJobSalary=function(t){e.setState({jobSalary:t.target.value})},e.handleJobLocation=function(t){e.setState({jobLocation:t.target.value})},e.handleJobDescription=function(t){e.setState({jobDescription:t.target.value})},e.handleSubmitJob=function(t){t.preventDefault();var n=document.getElementById("create-job-required-fields"),a=e.state,r=a.jobTitle,o=a.jobSalary,l=a.jobLocation,s=a.jobDescription;""!==r&&""!==o&&l&&""!==s?f.firestore().collection("jobs").add({jobTitle:r,jobSalary:o,jobLocation:l,jobDescription:s}).then((function(e){console.log(e),E("Job added: ",r,o,l,s)})).catch((function(e){console.log(e.message)})):(n.style.color="red",n.textContent="All Fields Required")},e.enterPressed=function(t){"Enter"===t.key&&e.handleSubmitJob(t)},e}return Object(i.a)(n,[{key:"componentWillUnmount",value:function(){console.log("Job Umounting")}},{key:"render",value:function(){return r.a.createElement(b.g,{lg:"6",id:"create-job"},r.a.createElement("form",null,r.a.createElement("p",{className:"h5 text-center mb-4"},"Post a new job"),r.a.createElement("div",{className:"grey-text"},r.a.createElement(b.k,{onChange:this.handleJobTitle,label:"Type a new job title",group:!0,type:"text",id:"job-title",validate:!0,error:"wrong",success:"right"}),r.a.createElement(b.k,{onChange:this.handleJobSalary,label:"Expected salary",group:!0,type:"text",id:"job-salary",validate:!0,error:"wrong"}),r.a.createElement(b.k,{onChange:this.handleJobLocation,label:"Location",group:!0,type:"text",id:"job-salary",validate:!0,error:"wrong"}),r.a.createElement(b.k,{onChange:this.handleJobDescription,label:"Job details",group:!0,id:"job-description",type:"textarea",rows:"5",onKeyPress:this.enterPressed}),r.a.createElement("p",{id:"create-job-required-fields"})),r.a.createElement("div",{className:"text-center"},r.a.createElement(b.b,{onClick:this.handleSubmitJob},"Post"))))}}]),n}(a.Component),v=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onCollectionUpdate=function(e){var t=[];e.forEach((function(e){var n=e.data(),a=n.jobTitle,r=n.jobSalary,o=n.jobLocation,l=n.jobDescription;t.push({key:e.id,doc:e,jobTitle:a,jobSalary:r,jobLocation:o,jobDescription:l})})),a.setState({currentJobList:t})},a.authListener=function(){f.auth().onAuthStateChanged((function(e){e?(a.setState({user:e}),e.getIdTokenResult().then((function(e){console.log(e.claims.admin)}))):a.setState({user:null})}))},a.onDelete=function(e){f.firestore().collection("jobs").doc(e).delete().then((function(){console.log("Document successfully added!"),E("Successfully deleted","")})).catch((function(e){console.log("Error removing ",e.message)}))},a.ref=f.firestore().collection("jobs"),a.unsubscribe=null,a.state={currentJobList:[],user:{}},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.unsubscribe=this.ref.onSnapshot(this.onCollectionUpdate),this.authListener()}},{key:"componentWillMount",value:function(){this.unsubscribe=this.ref.onSnapshot(this.onCollectionUpdate),this.authListener()}},{key:"render",value:function(){var e=this;return r.a.createElement(b.g,null,this.state.currentJobList.map((function(t){return r.a.createElement(b.c,{key:t.key,style:{margin:"20px"},id:t.doc.id},r.a.createElement(b.d,null,e.state.user?r.a.createElement("div",null,r.a.createElement("a",{href:"/#",className:"close","data-dismiss":"alert","aria-label":"close",style:{color:"red"},onClick:function(){return e.onDelete(t.doc.id)}},"\xd7")):null,r.a.createElement(b.f,null,t.jobTitle),r.a.createElement(b.e,null,r.a.createElement("i",{className:"fas fa-pound-sign"})," ",r.a.createElement("b",null,t.jobSalary)," per annum"),r.a.createElement(b.e,null,r.a.createElement("i",{className:"fas fa-map-marker-alt"})," ",r.a.createElement("b",null,t.jobLocation)),r.a.createElement(b.e,null,t.jobDescription),r.a.createElement(b.b,{color:"elegant",onClick:function(){return console.log(t.doc.id)}},"Find out more")))})))}}]),n}(a.Component),j=function(){return r.a.createElement("h1",{className:"text-center"},"Oooops! Page is not Found 404")},w=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/",component:g}),r.a.createElement(m.a,{path:"/jobs/",component:v}),r.a.createElement(m.a,{path:"/create-a-job/",component:y}),r.a.createElement(m.a,{component:j})))}}]),n}(a.Component),k=(n(91),function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).logout=function(){f.auth().signOut().then((function(){E("Successful logout","")})).catch((function(e){console.log(e)}))},e}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement(b.i,{id:"modal-singOut"},r.a.createElement(b.v,null,r.a.createElement(b.b,{onClick:this.logout},"Sign out")))}}]),n}(a.Component)),S=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){(new A).authListener()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.r,{className:"ml-auto"},r.a.createElement(b.n,null,r.a.createElement(b.o,{to:"/jobs"},"Job list")),r.a.createElement(b.n,null,r.a.createElement(b.o,{to:"/create-a-job"},"Create a job"))),r.a.createElement(b.r,{right:!0},r.a.createElement(b.n,{className:"user-info",style:{color:"white",lineHeight:"3.5"}}),r.a.createElement(b.n,null,r.a.createElement(k,null))))}}]),n}(a.Component),C=(n(92),function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).toggle=function(){a.setState({modal:!a.state.modal})},a.handleUserEmail=function(e){a.setState({userEmail:e.target.value})},a.handleUserPassword=function(e){a.setState({userPassword:e.target.value})},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.userEmail,r=t.userPassword;if(""===n||""===r){var o=document.getElementById("error-login");return o.style.color="red",o.style.textAlign="center",void(o.textContent="All values are required")}var l=document.getElementById("wrong-login-password");f.auth().signInWithEmailAndPassword(n,r).then((function(e){console.log(e),E("Successful login, ",n)})).catch((function(e){l.style.color="red",l.textContent=e.message}))},a.enterPressed=function(e){"Enter"===e.key&&a.handleSubmit(e)},a.state={modal:!1,userEmail:"",userPassword:""},a}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement(b.i,{id:"modal-login"},r.a.createElement(b.v,null,r.a.createElement(b.b,{onClick:this.toggle},"Sign in"),r.a.createElement(b.l,{isOpen:this.state.modal,toggle:this.toggle},r.a.createElement("br",null),r.a.createElement(b.m,{toggle:this.toggle},"Sign in"),r.a.createElement(b.g,null,r.a.createElement("form",null,r.a.createElement("div",{className:"text-left"},r.a.createElement(b.k,{onChange:this.handleUserEmail,label:"Type your email",id:"signInUser",icon:"envelope",group:!0,type:"email",validate:!0,error:"wrong",success:"right"}),r.a.createElement(b.k,{onChange:this.handleUserPassword,label:"Type your password",id:"signInPassword",icon:"lock",group:!0,type:"password",onKeyPress:this.enterPressed,validate:!0}),r.a.createElement("p",{id:"error-login"}),r.a.createElement("p",{id:"wrong-login-password"})),r.a.createElement("div",{className:"text-center"},r.a.createElement(b.b,{onClick:this.handleSubmit},"Login")))))))}}]),n}(a.Component)),O=(n(93),p.a.functions()),P=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={modal:!1,registerUserEmail:"",registerPassword:"",confirmPassword:"",isChecked:!0},e.toggle=function(){e.setState({modal:!e.state.modal})},e.handleRegisterUserEmail=function(t){e.setState({registerUserEmail:t.target.value})},e.handleRegisterUserPassword=function(t){e.setState({registerPassword:t.target.value})},e.handleConfirmRegisterPassword=function(t){e.setState({confirmPassword:t.target.value})},e.handleSubmitRegister=function(t){t.preventDefault();var n=e.state,a=n.registerUserEmail,r=n.registerPassword,o=n.confirmPassword;n.isChecked;if(""===a||""===r||""===o){var l=document.getElementById("error-register");return l.style.color="red",l.style.textAlign="center",void(l.textContent="All values are required")}if(r!==o){var s=document.getElementById("wrong-passwords");return s.style.color="red",s.style.textAlign="center",void(s.textContent="Passwords not match")}f.auth().createUserWithEmailAndPassword(a,r).then((function(e){console.log(e),E("Successful sign up, ",a)})).catch((function(e){console.log(e);var t=document.getElementById("passwords-length");t.style.color="red",t.style.textAlign="center",t.textContent=e}))},e.enterPressed=function(t){"Enter"===t.key&&e.handleSubmitRegister(t)},e.onMakeAdmin=function(){var t=e.state.registerUserEmail;O.httpsCallable("addAdminRole")({email:t}).then((function(e){console.log(e)}))},e}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement(b.i,{id:"modal-register"},r.a.createElement(b.v,null,r.a.createElement(b.b,{onClick:this.toggle},"Register"),r.a.createElement(b.l,{isOpen:this.state.modal,toggle:this.toggle},r.a.createElement("br",null),r.a.createElement(b.m,{toggle:this.toggle},"Register"),r.a.createElement(b.g,null,r.a.createElement("form",null,r.a.createElement("div",{className:"text-left"},r.a.createElement(b.k,{onChange:this.handleRegisterUserEmail,label:"Type your email",id:"registerUser",icon:"envelope",group:!0,type:"email",validate:!0,error:"wrong",success:"right",required:!0}),r.a.createElement(b.k,{onChange:this.handleRegisterUserPassword,label:"Type your password",id:"registerPassword",icon:"lock",group:!0,type:"password",validate:!0,required:!0}),r.a.createElement(b.k,{onChange:this.handleConfirmRegisterPassword,label:"Confirm password",id:"confirmPassword",icon:"lock",group:!0,type:"password",onKeyPress:this.enterPressed,validate:!0,required:!0}),r.a.createElement("p",{id:"error-register"}),r.a.createElement("p",{id:"wrong-passwords"}),r.a.createElement("p",{id:"passwords-length"}),r.a.createElement("p",null,"Password should be at least 6 characters")),r.a.createElement("div",{className:"text-center"},r.a.createElement(b.b,{onClick:this.onMakeAdmin},"Make Admin"),r.a.createElement(b.b,{onClick:this.handleSubmitRegister},"Register")))))))}}]),n}(a.Component),x=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.r,{className:"ml-auto"},r.a.createElement(b.n,null,r.a.createElement(b.o,{to:"/"},"Home")),r.a.createElement(b.n,null,r.a.createElement(b.o,{to:"/jobs"},"Job list"))),r.a.createElement(b.r,{right:!0},r.a.createElement(C,null),r.a.createElement(P,null)))},A=(n(94),function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isOpen:!1,user:{}},e.toggleCollapse=function(){e.setState({isOpen:!e.state.isOpen})},e.authListener=function(){var t=document.querySelector(".user-info");f.auth().onAuthStateChanged((function(n){if(n){e.setState({user:n});var a="Welcome, ".concat(n.email);t.innerHTML=a}else e.setState({user:null})}))},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.authListener()}},{key:"render",value:function(){return r.a.createElement(b.p,{color:"indigo",dark:!0,expand:"md",className:"bg-transparent"},r.a.createElement(b.q,null,r.a.createElement(b.o,{to:"/"},r.a.createElement("strong",{className:"white-text text-center"},"Amber",r.a.createElement("br",null)," Recruitment"))),r.a.createElement(b.s,{onClick:this.toggleCollapse}),r.a.createElement(b.h,{id:"navbarCollapse3",isOpen:this.state.isOpen,navbar:!0},this.state.user?r.a.createElement(S,null):r.a.createElement(x,null)))}}]),n}(a.Component)),L=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(A,null),r.a.createElement(w,null))},J=n(21);l.a.render(r.a.createElement(J.a,{basename:"/amber-recruitment"},r.a.createElement(L,null)),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.e4e08a55.chunk.js.map